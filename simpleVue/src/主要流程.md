# 主要流程

1. 全局初始化
    1. 合并选项
    2. 安装插件
    3. 初始化mixin方法、extend方法、component、filter、directive方法
2. 组件生命周期
    1. 代理监听错误
    2. 初始化生命周期钩子
    3. 初始化渲染函数
    4. 调用beforeCreate钩子
    5. 初始化注入的数据
    6. 初始化状态
        1. 初始化props 代理props数据
        2. 初始化methods
        3. 初始化data
            1. 代理data中的数据
            2. 监听data中的数据变化
                `Observer.prototype.walk -> Observer.defineReactive`
        4. 初始化计算属性
            1. 构建监视器Watcher
            2. 代理计算属性的getter和watcher
        5. 初始化watch属性
    7. 初始化provide的数据
    8. 调用created钩子
    9. 调用挂载的方法
        1. 生成渲染函数（如果是在运行时的Vue则不需要执行）
        2. 触发beforeMount钩子
        3. 调用updateComponent函数
            1. 调用update
                1. 触发beforeUpdate钩子
                2. 调用patch方法
                    1. 没有旧的节点会触发节点的create钩子
                    2. 没有旧节点或没有真实的dom元素则触发节点的insert钩子
                        1. 如果是组件且没有挂载会触发组件的mounted钩子
                        2. 如果是keep-alive内的节点/组件此时可能会触发activated钩子
                    3. 有旧节点触发节点的update钩子
                    4. 要移除的时候触发节点的remove钩子
                        1. 如果组件不是keep-alive会触发destroy钩子
                        2. 如果组件是keep-alive内部组件，则会触发deactivated钩子
                3. 如果组件没有挂载会触发updated的钩子
            2. 增加监视器用于$forceUpdate去强制更新组件
            3. 第一次挂载触发mounted钩子
        4. 如果是keep-alive组件可能会触发activated钩子
    10. 销毁
        1. 调用beforeDestroy钩子
        2. 销毁观察者
        3. patch
        4. 调用destroyed钩子
        5. 销毁事件监听器
        6. 释放各种引用
